{% extends "base/base.html" %}

{% block content %}

<div class="container">
  <h1>Submit a package</h1>
<!--
  {% if saved %}
    <p>Package submitted</p>
  {% else %}
    <form method="post" class="form" role="form">
      <div class="form-group ">
        <label class="control-label" >Name</label> {{ form.name }}
      </div>
      <div class="form-group ">
        <label class="control-label" >Type</label> {{ form.type }}
      </div>
      <input type="submit" value="Submit the package">
    </form>
  {% endif %}
-->


  {% if step == 1 or step == 2 %}
  <form method="post" action="{{ url_for("submit_package") }}">
    {{ form.step }}
    <div class="form-group ">
      <label class="control-label">Package url :</label> {{ form.url_package }}
    </div>
    {% if form.url_build_status %}
      <div class="form-group ">
        <label class="control-label">Build status :</label> {% if step == 2 %}<img src="{{ form.url_build_status.data }}"/> {% endif %} {{ form.url_build_status }}
      </div>
    {% endif %}
    {% if step == 2 %}
    <div class="form-group ">
      <label class="control-label">Package :</label> {{ form.package.data }}
      {{ form.package }}
      {{ form.type }}
      {{ form.name }}
    </div>
    <div class="form-group ">
      <label class="control-label">Version :</label> {{ form.version.data }}
      {{ form.version }}
    </div>
    <img src="/icons/{{ form.type.data }}_{{ form.name.data }}_{{ form.version.data }}.png"/>
    <div class="form-group ">
      <label class="control-label">Description :</label> {{ form.description.data }}
      {{ form.description }}
    </div>
    <div class="form-group ">
      <label class="control-label">Author :</label> {{ form.author.data }} - {{ form.author_email.data }} 
      {{ form.author }}
      {{ form.author_email }}
    </div>
    <div class="form-group ">
      <label class="control-label">Tags :</label> {{ form.tags.data }}
      {{ form.tags }}
    </div>
    {{ form.hash_sha256 }}
    {% endif %}
    <input type="submit" value="Validate">
  </form>
  {% endif %}


  {% if step == 3 %}
    {% if success %}
      <p>The package has been submitted!</p>
    {% else %}
      <p>Oooops... The package was not submitted!</p>
    {% endif %}
  {% endif %}

</div>
{% endblock %}

